services:
  beszel-hub:
    image: henrygd/beszel:0.18.2
    container_name: beszel-hub
    restart: unless-stopped
    # ports:
    #  - 8090:8090
    volumes:
      - /home/atlas/app-data/beszel-hubdata:/beszel_data
      - /home/atlas/app-data/beszel-hub/socket:/beszel_socket
    networks:
      traefik: 
    labels:
      traefik.enable: true
      # HTTP
      traefik.http.routers.beszel-hub.entrypoints: http
      traefik.http.routers.beszel-hub.rule: Host(`beszel.services.husovich.com`)
      traefik.http.routers.beszel-hub.middlewares: traefik-https-redirect
      traefik.http.middlewares.traefik-https-redirect.redirectscheme.scheme: https
      # HTTPS
      traefik.http.routers.beszel-hub-secure.entrypoints: https
      traefik.http.routers.beszel-hub-secure.rule: Host(`beszel.services.husovich.com`)
      traefik.http.routers.beszel-hub-secure.tls.certresolver: myresolver
